import Logo from "@/app/assets/imgs/logo.png";
import clsx from "clsx";
import { Button } from "@/components/ui/button";
import Link from "next/link";
import { usePathname } from "next/navigation";

export function NavBar({
  lang,
  onLangChange,
}: {
  lang: "en" | "ar";
  onLangChange: (lang: "en" | "ar") => void;
}) {
  const toggleLang = () => {
    onLangChange(lang === "en" ? "ar" : "en");
  };

  const pathname = usePathname();

  const navItems = [
    { href: "", label: { en: "Home", ar: "الرئيسية" } },
    { href: "/about", label: { en: "About Us", ar: "من نحن" } },
    { href: "/services", label: { en: "Our Services", ar: "خدماتنا" } },
    { href: "/contact", label: { en: "Contact Us", ar: "اتصل بنا" } },
  ];
  return (
    <header className="bg-background border-b">
      <div
        className={clsx(
          "container mx-auto px-4 py-4 flex items-center gap-8",
          "md:px-8",
          lang === "en" ? "flex-row" : "justify-end flex-row-reverse"
        )}
      >
        <img
          src={Logo.src}
          alt="Al-Muhandis Logo"
          width={150}
          height={50}
          className="w-52 h-fit mt-1"
        />
        <nav className="flex-grow">
          <ul
            className={clsx(
              "flex items-center justify-center gap-4 *:text-lg",
              lang === "ar" && "flex-row-reverse"
            )}
          >
            {navItems.map((item) => (
              <li key={item.href}>
                <Link
                  href={item.href}
                  className={clsx(
                    "text-foreground hover:text-primary transition-colors",
                    pathname === `/${lang}` + item.href &&
                      " p-3 bg-blue-600 text-white rounded-full"
                  )}
                >
                  {lang === "en" ? item.label.en : item.label.ar}
                </Link>
              </li>
            ))}
          </ul>
        </nav>

        <Button
          variant="outline"
          onClick={toggleLang}
          aria-label={lang === "en" ? "Switch to Arabic" : "Switch to English"}
          className={clsx(
            "flex items-center gap-2 text-lg font-semibold ",
            lang === "ar" && "flex-row-reverse"
          )}
        >
          {lang === "en" ? (
            <>
              <span className="text-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="2rem"
                  height="2rem"
                  viewBox="0 0 36 36"
                >
                  <path
                    fill="#B22334"
                    d="M35.445 7C34.752 5.809 33.477 5 32 5H18v2zM0 25h36v2H0zm18-8h18v2H18zm0-4h18v2H18zM0 21h36v2H0zm4 10h28c1.477 0 2.752-.809 3.445-2H.555c.693 1.191 1.968 2 3.445 2M18 9h18v2H18z"
                  />
                  <path
                    fill="#EEE"
                    d="M.068 27.679q.025.14.059.277q.04.15.092.296c.089.259.197.509.333.743L.555 29h34.89l.002-.004a4 4 0 0 0 .332-.741a4 4 0 0 0 .152-.576c.041-.22.069-.446.069-.679H0c0 .233.028.458.068.679M0 23h36v2H0zm0-4v2h36v-2H18zm18-4h18v2H18zm0-4h18v2H18zM.555 7l-.003.005zM.128 8.044c.025-.102.06-.199.092-.297a4 4 0 0 0-.092.297M18 9h18c0-.233-.028-.459-.069-.68a3.6 3.6 0 0 0-.153-.576A4 4 0 0 0 35.445 7H18z"
                  />
                  <path fill="#3C3B6E" d="M18 5H4a4 4 0 0 0-4 4v10h18z" />
                  <path
                    fill="#FFF"
                    d="m2.001 7.726l.618.449l-.236.725L3 8.452l.618.448l-.236-.725L4 7.726h-.764L3 7l-.235.726zm2 2l.618.449l-.236.725l.617-.448l.618.448l-.236-.725L6 9.726h-.764L5 9l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L9 9l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L13 9l-.235.726zm-8 4l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L5 13l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L9 13l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L13 13l-.235.726zm-6-6l.618.449l-.236.725L7 8.452l.618.448l-.236-.725L8 7.726h-.764L7 7l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L11 7l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L15 7l-.235.726zm-12 4l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L3 11l-.235.726zM6.383 12.9L7 12.452l.618.448l-.236-.725l.618-.449h-.764L7 11l-.235.726h-.764l.618.449zm3.618-1.174l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L11 11l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L15 11l-.235.726zm-12 4l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L3 15l-.235.726zM6.383 16.9L7 16.452l.618.448l-.236-.725l.618-.449h-.764L7 15l-.235.726h-.764l.618.449zm3.618-1.174l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L11 15l-.235.726zm4 0l.618.449l-.236.725l.617-.448l.618.448l-.236-.725l.618-.449h-.764L15 15l-.235.726z"
                  />
                </svg>
              </span>
              <span className="sr-only">English</span>
            </>
          ) : (
            <>
              <span className="text-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="2rem"
                  height="2rem"
                  viewBox="0 0 36 36"
                >
                  <path
                    fill="#141414"
                    d="M36 27a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V9a4 4 0 0 1 4-4h28a4 4 0 0 1 4 4z"
                  />
                  <path fill="#EEE" d="M0 13h36v10H0z" />
                  <path
                    fill="#CE1225"
                    d="M32 5H4a4 4 0 0 0-4 4v4h36V9a4 4 0 0 0-4-4"
                  />
                  <path
                    fill="#BF9300"
                    d="M14.75 21.562s.016.25.234.375c0 0-.062.188.172.297s1.078.281 2.547.281s2.297-.156 2.516-.266c.219-.109.234-.359.234-.359s.234-.125.219-.281s-.328-.328-.328-.328s-.078-.203-.297-.281s-.922.344-2.266.281s-2.109-.266-2.359-.25s-.359.266-.359.266s-.282.125-.313.265"
                  />
                  <path
                    fill="#EEE"
                    d="M14.922 21.547c-.013.093.188.297.188.297s0 .234.203.297s1.031.219 2.375.203s2.297-.094 2.406-.188s.203-.297.203-.297s.219-.156.203-.281s-.328-.203-.328-.203s-.088-.188-.192-.266s-.776.312-2.214.312c-1.407 0-2.219-.344-2.359-.328s-.234.281-.234.281s-.235.064-.251.173"
                  />
                  <path
                    fill="#BF9300"
                    d="M20.859 15.484s-.031-.734-.703-.641c-.672.094-.719.422-1.438.5l-.148.014a3.2 3.2 0 0 1-.196-1.014c0-.469.141-.672-.344-.906c-.484-.234-.578-.016-.578-.016s-.375-.188-.547-.047s-.078.5 0 .391s.391.203.391.203c.106.519-.195 1.081-.401 1.394c-.071-.007-.128-.01-.208-.019c-.719-.078-.766-.406-1.438-.5s-.703.641-.703.641l-.266 5.672l.547-.422l.003-.067l1.138-1.011l.19-.19l-.471 1.377s-.719-.047-.516.531c0 0 .109-.328.297-.266s.734.203.734.203l.188.297l.234-.219l.734-.031s.234.062.219.266a.45.45 0 0 0 .037-.283l.221-.015a.45.45 0 0 0 .034.299c-.016-.203.219-.266.219-.266l.734.031l.235.219l.188-.297s.546-.141.733-.203s.297.266.297.266c.203-.578-.516-.531-.516-.531l-.449-1.313l.126.126l1.138 1.011l.003.067l.547.422zm-3.107 3.438c-1.127-.696-1.22-2.453-1.22-2.453s.697-.036 1.203-.391c.456.405 1.234.359 1.234.359s-.053 1.764-1.217 2.485m2.576-3.656l-.953.906l-.16.064c-.164.006-.962.008-1.465-.439c-.625.438-1.484.469-1.484.469l-.133-.053l-1.055-.947l-.277.114c.012-.113.074-.367.418-.317c.564.081.797.391 1.391.453l.168.017l-.059.076c.092 0 .228-.027.328-.049l.113.011l-.051.178c.08-.024.196-.093.291-.154l.26.025l.059.082l.198-.099l.133-.013c.115.067.279.127.279.127l.031-.156c.141.094.375.094.375.094c-.027-.022-.054-.078-.082-.126l.144-.015c.594-.062.826-.372 1.391-.453c.344-.049.406.204.418.317z"
                  />
                  <path
                    fill="#EEE"
                    d="m17.375 18.891l-.563 2.14l-.937-.187l.969-2.75zm.699 0l.562 2.14l.938-.187l-.969-2.75z"
                  />
                  <path
                    fill="#BF9300"
                    d="M16.766 16.641s.078.906.484 1.609v-1.812s-.266.156-.484.203m1.953.031s-.078.906-.484 1.609v-1.812c-.001 0 .265.156.484.203"
                  />
                  <path
                    fill="#EEE"
                    d="M16.953 13.578s.109-.109.422.109c.203.142.383.25.383.25s.128-.135.316-.104s.083.292.114.838c.031.547.25.781.25.781l-.266-.156l.016.172l-.297-.141l-.141.203l-.141-.219l-.228.139l-.069-.186l-.266.141s.391-.484.422-1.016c.009-.159-.031-.516-.031-.516s-.249-.311-.484-.295"
                  />
                  <path
                    fill="#BF9300"
                    d="M15.547 21.656c-.179.107-.109.172 0 .219s.765.126 2.094.156c1.359.031 2.203-.125 2.312-.188c.109-.062.125-.172-.062-.203c-.188-.031-1.125.125-2.266.125c-1.406.001-2-.156-2.078-.109"
                  />
                </svg>
              </span>
              <span className="sr-only">العربية</span>
            </>
          )}
          {lang === "en" ? "EN" : "عربي"}
        </Button>
      </div>
    </header>
  );
}
